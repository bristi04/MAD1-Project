<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Librarian Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" integrity="sha384-nU14brUcp6StFntEOOEBvcJm4huWjB0OcIeQ3fltAfSmuZFrkAif0T+UtNGlKKQv" crossorigin="anonymous">"
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  </head>
<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary" data-bs-theme="dark">
            <div class="container-fluid">
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo03" aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <a class="navbar-brand" href="#">Librarian Dashboard</a>
              <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/allsection">Sections</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/admin_requests">Request-Management</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/admin_stats">Stats</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/profile_admin">My Profile</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/login_as_admin">Logout</a>
                  </li>
                </ul>
              </div>
            </div>
          </nav><br>
          {% with messages = get_flashed_messages() %}
          {% if messages %}
            {% for message in messages %}
            <div class="alert alert-success" role="alert">
              {{message}}
            </div>
            {% endfor %}
          {% endif %}
         {% endwith %} <br>
          <div class="current">
            <h2 style="text-align :center">Requested Transactions</h2><br>
            <table class="table">
                <thead>
                  <tr>
                    <th scope="col">User ID</th>
                    <th scope="col">User Name</th>
                    <th scope="col">Book ID</th>
                    <th scope="col">Book Title</th>
                    <th scope="col">Author</th>
                    <th scope="col">Price</th>
                    <th scope="col">Action</th>
                    
                  </tr>
                </thead>
                <tbody>
                  {% for orders in order %}
                  {% if orders.payment =='payment pending' %}
                  <tr>
                    <td>{{orders.user_id}}</td>
                    <td>{{orders.username}}</td>
                    <td>{{orders.book_id}}</td>
                    <td>{{orders.book_name}}</td>
                    <td>{{orders.author_name}}</td>
                    <td>{{orders.price}}</td>
                    <td><a href="/grantorder/{{orders.order_id}}"  class="btn btn-success" role="button">Review</a>
                    </td>
                  </tr>
                  {% endif %}
                  {% endfor %}
                </tbody>
              </table><br>
              <h2 style="text-align :center">Pending Transactions</h2><br>
              <table class="table">
                <thead>
                  <tr>
                    <th scope="col">User ID</th>
                    <th scope="col">Username</th>
                    <th scope="col">Book ID</th>
                    <th scope="col">Book Title</th>
                    <th scope="col">Category ID</th>
                    <th scope="col">Author</th>
                    <th scope="col">Price</th>
                    <th scope="col">Status</th>  
                  </tr>
                </thead>
                <tbody>
                  {% for orders in order %}
                  {% if orders.payment =='pay now' %}
                  <tr>
                    <td>{{orders.user_id}}</td>
                    <td>{{orders.username}}</td>
                    <td>{{orders.book_id}}</td>
                    <td>{{orders.book_name}}</td>
                    <td>{{orders.category_id}}</td>
                    <td>{{orders.author_name}}</td>
                    <td>{{orders.price}}</td>
                    <td> Payment Pending</td>
                  </tr>
                  {% endif %}
                  {% endfor %}
                </tbody>
              </table><br>
            </table><br>
            <h2 style="text-align :center">Paid Transactions</h2><br>
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">User ID</th>
                    <th scope="col">Username</th>
                    <th scope="col">Book ID</th>
                    <th scope="col">Book Title</th>
                    <th scope="col">Category ID</th>
                    <th scope="col">Author</th>
                    <th scope="col">Price</th>
                    <th scope="col">Status</th> 
                </tr>
              </thead>
              <tbody>
                {% for orders in order %}
                  {% if orders.payment =='paid' %}
                  <tr>
                    <td>{{orders.user_id}}</td>
                    <td>{{orders.username}}</td>
                    <td>{{orders.book_id}}</td>
                    <td>{{orders.book_name}}</td>
                    <td>{{orders.category_id}}</td>
                    <td>{{orders.author_name}}</td>
                    <td>{{orders.price}}</td>
                    <td> paid</td>
                  </tr>
                  {% endif %}
                  {% endfor %}
              </tbody>
            </table>
                
      </body>
      </html>